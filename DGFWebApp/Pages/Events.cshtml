@page
@model DGFWebApp.Pages.EventsModel
@{
}
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<main>
    <div class="container">
        <h2 class="page-title">Upcoming Events</h2>

        <div class="events-grid" id="eventsContainer">
            <!-- Events will be loaded dynamically from JSON -->
        </div>
    </div>
</main>
<script>

    async function load() {
        const res = await fetch('/api/Events/allactiveevents');
        if (res.ok) {
            const events = await res.json();
            const container = $('#eventsContainer');

            events.forEach(function (event) {
                const buttonClass = event.buttonStyle === 'outline' ? 'event-button outline' : 'event-button';

                const eventCard = `
                                <div class="event-card">
                                    <div class="event-content">
                                        <h3 class="event-title">${event.title}</h3>
                                        <p class="event-meta">${event.eventDate} | ${event.location}</p>
                                        <a href="#" class="event-link">More Info</a>
                                        <br>
                                            <button class="event-button outline">${event.eventType}</button>
                                    </div>
                                </div>
                            `;

                container.append(eventCard);
            });
        }
        else {
            $('#eventsContainer').html('<p style="text-align: center; color: #666;">Unable to load events. Please try again later.</p>');
        }
    }
    load();
    // Load events from JSON file using jQuery
    // $(document).ready(function () {
    //     $.getJSON('events.json', function (events) {
    //         const container = $('#eventsContainer');

    //         events.forEach(function (event) {
    //             const buttonClass = event.buttonStyle === 'outline' ? 'event-button outline' : 'event-button';

    //             const eventCard = `
    //                         <div class="event-card">
    //                             <div class="event-content">
    //                                 <h3 class="event-title">${event.title}</h3>
    //                                 <p class="event-meta">${event.date} | ${event.location}</p>
    //                                 <a href="#" class="event-link">More Info</a>
    //                                 <br>
    //                                 <button class="${buttonClass}">${event.buttonText}</button>
    //                             </div>
    //                         </div>
    //                     `;

    //             container.append(eventCard);
    //         });
    //     }).fail(function () {
    //         $('#eventsContainer').html('<p style="text-align: center; color: #666;">Unable to load events. Please try again later.</p>');
    //     });
    // });
</script>